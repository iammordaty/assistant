{% extends '@common/layout.twig' %}

{% block title %}{{ track.name }}{% endblock %}

{% block contentBlock %}
    <div id="wave-progress" class="text-center"><i class="fa fa-cog fa-spin fa-5x"></i></div>
    <div id="wave-container" data-track-url="{{ url_for('track.contents.get', { guid: track.guid }) }}">
        <div id="wave-controls">
            <i data-role="play-pause" class="fa fa-play"></i>
        </div>
        <div id="wave-time-current-time" data-time-mode="elapsed">00:00</div>
        <div id="wave-time-track-duration" data-track-length="{{ track.length }}">{{ track.length|format_duration }}</div>
        <div id="wave"></div>
    </div>

    <script src="/vendor/wavesurfer.js/wavesurfer.min.js" type="text/javascript"></script>
    <script src="/js/track.js" type="module"></script>

    <div class="track-info">
        <legend>
            <a href="{{ url_for('search.advanced.index') }}?artist={{ track.artist }}" class="undecorated">{{ track.artist }}</a> - {{ track.title }}
        </legend>

        <div class="row">
            {% include '@track/track/trackInfo.twig' with {
                track: track,
                breadcrumbs: breadcrumbs,
                extraClasses: musicalKeyInfo ? [ 'col-sm-8', 'col-md-9' ] : [],
            } only %}

           {% if musicalKeyInfo %}
                {% include '@track/track/musicalKeyInfo.twig' with musicalKeyInfo only %}
           {% endif %}
        </div>
    </div>

    <div data-role="similar-tracks:container" class="similar-tracks">
        <legend data-role="similar-tracks:toggle-visibility" class="toggle-visibility">
            Podobne utwory
            <i
                data-role="similar-tracks:toggle-visibility-icon"
                class="fa fa-angle-double-down pull-right toggle-visibility-icon">
            </i>
        </legend>

        {% include '@track/similarTracks/form.twig' with {
            form: form,
            actionUrl: url_for('track.track.index', { guid: track.guid }),
        } only %}

        {% include '@track/similarTracks/list.twig' with {
            similarTracksList: similarTracksList,
            similarTracksSoftLimit: similarTracksSoftLimit,
        } only %}
    </div>
{% endblock %}
